function setListenerToSignalR(){if(!mySignalRListener.wsconn){setTimeout(function(){setListenerToSignalR()},300);return}mySignalRListener.wsconn.on("RecieveAcceptAnother",n=>{CheckDuplicateInLockBlock(n).then(function(n){!n})});mySignalRListener.wsconn.on("OnPaymentStatusCompelete",n=>{CheckDuplicateInLockBlock(n).then(function(n){n&&OnPaymentStatusCompeleteFn()})});mySignalRListener.wsconn.on("RecieveCartInStoreManager",(n,t,i,r,u,f,e,o)=>{CheckDuplicateInLockBlock(n).then(function(s){s&&RecieveCartInStoreManagerFn(n,t,i,r,u,f,e,o)})})}function OnPaymentStatusCompeleteFn(){window.location.href="/StoreManagerCart"}function RecieveCartInStoreManagerFn(n,t,i,r,u,f,e,o){var c,h,s;if(ring.play(),c=JSON.parse(o),h={},h.cart=c,h.userid=t,h.connectionid=i,s=localStorage.getItem("allCart"),s)try{s=JSON.parse(s)}catch(l){s=[]}else s=[];s.push(h);localStorage.setItem("allCart",s);alertify.confirm("سبد "+r,function(r){r&&signalRListenerThis.InvokeProcess(InvokeSender.AcceptCart,n,1,t,i)}).set({title:"فاز "+u+", "+f}).set("closable",!1).set("labels",{ok:"قبول میکنم",cancel:"رد شود"})}setListenerToSignalR();